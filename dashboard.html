<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
-->
<!DOCTYPE HTML>
<html>
<head>
	<title>Pegasus Gaming Event | Dashboard</title>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />

<!-- Memberstack -->
<script data-memberstack-app="app_cl6avui88003z0ulo9rgd5k4p" src="https://static.memberstack.com/scripts/v1/memberstack.js" type="text/javascript"></script>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery-1.11.0.min.js"></script>
<!-- Custom Theme files -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<!-- Custom Theme files -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- Google Fonts -->
<link href='//fonts.googleapis.com/css?family=Ubuntu:300,400,500,700' rel='stylesheet' type='text/css'>
</head>
<body>
<!-- Header Starts Here -->
<div class="header">
	<div class="container">
		<div class="logo">
			<a href="index.html"><img width="180px" src="images/logo2.png" alt=""></a>
		</div>
		<span class="menu"></span>
		<div class="navigation">
			<ul class="navig cl-effect-3" >
				<li><a href="index.html">Home</a></li>
			</ul>
			<div class="clearfix"></div>
			<script>
				$( "span.menu" ).click(function() {
				  $( ".navigation" ).slideToggle( "slow", function() {
				    // Animation complete.
				  });
				});
			</script>
			<div class="clearfix"></div>
		</div>
		<div class="clearfix"></div>
	</div>
</div>
<!-- Header Ends Here -->	
<!-- Games Page Starts here -->
<div class="games">
	<div class="container">
		<div class="page-path">
			<ul class="path-list">
				<!--<li><a href="index.html">Home</a></li>&nbsp;&nbsp;/&nbsp;&nbsp;-->
				<li class="act">Hello <span data-ms-member="name"></span></li>
			</ul>
			<p><a href="#" data-ms-modal="profile">Profile</a> 
				&nbsp;&nbsp;&nbsp;&nbsp;
				 <a href="#" data-ms-action="logout">Logout</a></p>
			
			<div class="clearfix"></div>
		</div>
		<h3 class="page-header">
			List of Events
		</h3>
		<div class="main">
			<div class="view view-first">
			  <img src="images/1.jpg" />
			  <div class="mask">
				<h2>The Lost Temple</h2>
				<p>In the heart of the jungle, lies the ancient Lost Temple.</p>
				<!--paid. show when no plan-->
				<a href="#" class="info" data-ms-price:add="prc_pegasus-2-ol14j0fnn" id="btn1">Enter</a>
				<!--Show when plan - paid-->
				<a href="event.html" class="info" id="btn1a">View</a>
			  </div>
			</div>
			<div class="view view-first">
			  <img src="images/3.jpg" />
			  <div class="mask">
				<h2>Pirate's Cove</h2>
				<p>In the vast ocean, a hidden Pirate's Cove awaits intrepid adventurers.</p>
								<!--paid. show when no plan-->
								<a href="#" class="info" data-ms-price:add="prc_1000-test-plan-xn20x5l" id="btn2">Enter</a>
				<!--Show when plan - paid-->
				<a href="event.html" class="info" id="btn2a">View</a>
			  </div>
			</div>
			<div class="view view-first">
			  <img src="images/6.jpg" />
			  <div class="mask">
				<h2>Fantasy Realm</h2>
				<p>Step into a world of magic and fantasy, where dragons soar through the skies.</p>
								<!--paid. show when no plan-->
								<a href="#" class="info" data-ms-price:add="prc_pro-xrd0s37" id="btn3">Enter</a>
				<!--Show when plan - paid-->
				<a href="event.html" class="info" id="btn3a">View</a>
			  </div>
			</div>
		
		  </div>
		  
          <div class="side-bar">

			<input type="hidden" name="email" data-ms-member="email">

          	<h4>My Events</h4>

<!-- Use an empty <ul> to show the plans -->
	<ul class="game-list" id="plan-list">
	</ul>

  <!-- Add a separate message for no plans found -->
  <p id="no-plans-message" style="display: none;" class="text-center">No Events found.</p>


          </div>
          <div class="clearfix"></div>
	</div>
</div>

<!-- Games Page Ends here -->
<!-- What New Part starts Here -->
<div class="what-new">
	<div class="container">
		<h3>What's New</h3>
		<div class="row blog-news">
		  <div class="col-md-6 blog-news-grid">
			<div class="news-grid-left">
			  <h4>06</h4>
			  <small>of January 2024</small>
			</div>
			<div class="news-grid-right">
			  <h4>Exciting Game Announcements</h4>
			  <p>Get ready for an incredible lineup of new game announcements! Join us on the 6th of January 2024 to witness the unveiling of the most anticipated games of the year. Experience the next level of gaming excitement!</p>
			</div>
			<div class="clearfix"></div>
		  </div>
		  <div class="col-md-6 blog-news-grid">
			<div class="news-grid-left">
			  <h4>28</h4>
			  <small>of January 2024</small>
			</div>
			<div class="news-grid-right">
			  <h4>Esports Championship Finals</h4>
			  <p>On the 28th of January 2024, witness the grand finale of our esports championship. Top players from around the world will compete for the ultimate title and a generous prize pool. Don't miss the intense action!</p>
			</div>
			<div class="clearfix"></div>
		  </div>
		</div>
		<div class="row blog-news">
		  <div class="col-md-6 blog-news-grid">
			<div class="news-grid-left">
			  <h4>21</h4>
			  <small>of January 2024</small>
			</div>
			<div class="news-grid-right">
			  <h4>Exclusive Game Demos</h4>
			  <p>Join us on the 21st of January 2024 for exclusive game demos. Be among the first to experience the newest game releases and provide valuable feedback to game developers. Your opinion matters!</p>
			</div>
			<div class="clearfix"></div>
		  </div>
		  <div class="col-md-6 blog-news-grid">
			<div class="news-grid-left">
			  <h4>05</h4>
			  <small>of January 2024</small>
			</div>
			<div class="news-grid-right">
			  <h4>Gaming Gear Showcase</h4>
			  <p>On the 5th of January 2024, explore the latest gaming gear and accessories from top gaming brands. From high-performance gaming peripherals to cutting-edge VR technology, find everything you need to enhance your gaming experience.</p>
			</div>
			<div class="clearfix"></div>
		  </div>
		</div>
	  </div>
	  
</div>
<!-- What New Part Endss Here -->
<!-- Footer Starts Here -->
<div class="footer">
	<div class="container">
		<ul class="social">
			<li><i class="fa"></i></li>
			<li><i class="fb"></i></li>
			<li><i class="fc"></i></li>
		</ul>
		<p>&copy; 2023 Pegasus. All Rights Reserved. <!--Design by <a href="http://w3layouts.com">W3layouts</a>--></p>
	</div>
	
</div>
<!-- Footer Ends Here -->

<script>
   document.addEventListener('DOMContentLoaded', function() {
      const emailInput = document.querySelector('input[data-ms-member="email"]');
      if (emailInput) {
        const email = emailInput.value.trim(); // Use .trim() to remove any leading/trailing spaces
        if (email) {
          const encodedEmail = encodeURIComponent(email);
          const apiKey = 'sk_sb_32d7476fab908c4842cc';
          const url = `https://admin.memberstack.com/members/${encodedEmail}`;

          fetch(url, {
            headers: {
              'x-api-key': apiKey
            }
          })
          .then(response => response.json())
		  .then(data => {
            const planConnections = data.data.planConnections;
            const planList = document.getElementById('plan-list');

            // Clear the list before adding new <li> elements
            planList.innerHTML = '';

			//initialize buttons
			const button1 = document.getElementById('btn1');
			const button2 = document.getElementById('btn2');
			const button3 = document.getElementById('btn3');
			const button1a = document.getElementById('btn1a');
			const button2a = document.getElementById('btn2a');
			const button3a = document.getElementById('btn3a');

			console.log('planConnections',planConnections.planName)
			
// Loop through each plan connection
planConnections.forEach(connection => {
  const planName = connection.planName;
  
  if (planName === "Pegasus Plan") {
    // Do something specific for Pegasus Plan plans
    console.log("Handling Pegasus Plan plan...");
  } else {
    // Do something for plans other than Pegasus Plan
	console.log("not Handling Pegasus Plan plan...");
  }

  if (planName === "Test Plan") {
    // Do something specific for Test Plan plans
    console.log("Handling Test Plan plan...");
  } else {
    // Do something for plans other than Test Plan
	console.log("not Handling Test Plan plan...");
  }

  if (planName === "paid") {
    // Do something specific for paid plans
    console.log("Handling paid plan...");
  } else {
    // Do something for plans other than paid
	console.log("Handling paid plan...");
  }



});



            if (planConnections && planConnections.length > 0) {
              planConnections.forEach(connection => {
                const planName = connection.planName;
                console.log('Plan Name:', planName);

				//Show plans
                const listItem = document.createElement('li');
                listItem.textContent = planName;
                planList.appendChild(listItem);

				//check and hide/show plans btn
			/*	if (planName === "Pegasus Plan") {    
				   button1.style.display = 'none';
				   button1a.style.display = 'inline-block';
				}else{
					button1a.style.display = 'none';
				}

				if (planName === "Test Plan") {    
				   button2.style.display = 'none';
				   button2a.style.display = 'inline-block';
				}else{
					button2a.style.display = 'none';
				} 

				if (planName === "paid") {    
				   button3.style.display = 'none';
				   button3a.style.display = 'inline-block';
				}else{
					button3a.style.display = 'none';
				} 
*/
				
              });
            } else {
              // If no plans found, show the no-plans-message
              const noPlansMessage = document.getElementById('no-plans-message');
              noPlansMessage.style.display = 'block';
			  console.log('No plans at all')
			  //hide all view btns
			  button1a.style.display = 'none';
			  button2a.style.display = 'none';
			  button3a.style.display = 'none';
            }
          })
          .catch(error => {
            console.error('Error:', error);
          });
        } else {
          console.log('Email input is empty.');
        }
      } else {
        console.log('Input element not found.');
      }
    });
  </script>



</body>
</html>